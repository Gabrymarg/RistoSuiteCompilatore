{% extends "base.html" %}
{% block content %}
<h2>Ingredienti Magazzino</h2>
<a href="{{ url_for('nuovo_ingrediente') }}" class="btn btn-success mb-3">Nuovo Ingrediente</a>

<table class="table table-bordered">
<thead>
    <tr>
        <th>Nome</th>
        <th>Quantità</th>
        <th>Unità di misura</th>
        <th>Descrizione</th>
        <th>Prezzo Unitario</th>
        <th>Scorta Minima</th>
        <th>Scorta Massima</th>
        <th>Allergene</th>
        <th>Fornitore</th>
        <th>Azioni</th>
    </tr>
</thead>
<tbody>
{% for ing in ingredienti %}
<tr>
    <td>{{ ing['nome'] }}</td>
    <td>{{ ing['quantita'] }}</td>
    <td>{{ ing['unita_misura'] }}</td>
    <td>{{ ing['descrizione'] }}</td>
    <td>€ {{ '%.2f'|format(ing['prezzo_unitario']) }}</td>
    <td>{{ ing['scorta_minima'] }}</td>
    <td>{{ ing['scorta_massima'] }}</td>
    <td>{{ ing['allergene_nome'] if ing['allergene_nome'] else '-' }}</td>
    <td>{{ ing['fornitore_nome'] if ing['fornitore_nome'] else '-' }}</td>
    <td>
        <a href="{{ url_for('modifica_ingrediente', id_ingrediente=ing['id_ingrediente']) }}" class="btn btn-primary btn-sm">Modifica</a>
        <form action="{{ url_for('elimina_ingrediente', id_ingrediente=ing['id_ingrediente']) }}" method="POST" style="display:inline-block;" onsubmit="return confirm('Sei sicuro di voler eliminare questo ingrediente?');">
            <button class="btn btn-danger btn-sm">Elimina</button>
        </form>
    </td>
</tr>
{% else %}
<tr>
    <td colspan="10">Nessun ingrediente trovato.</td>
</tr>
{% endfor %}
</tbody>
</table>
{% endblock %}
