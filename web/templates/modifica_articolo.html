{% extends "base.html" %}
{% block content %}
<h2>Modifica Articolo</h2>
<form method="POST">
    <div class="mb-3">
        <label>Nome</label>
        <input type="text" name="nome" class="form-control" value="{{ articolo['nome'] }}" required>
    </div>
    <div class="mb-3">
        <label>Descrizione</label>
        <textarea name="descrizione" class="form-control">{{ articolo['descrizione'] }}</textarea>
    </div>
    <div class="mb-3">
        <label>Prezzo</label>
        <input type="number" step="0.01" name="prezzo" class="form-control" value="{{ articolo['prezzo'] }}" min="0" required>
    </div>

    <h4>Ingredienti</h4>
    <p>Seleziona gli ingredienti e modifica la quantità se necessario:</p>
    <div class="mb-3">
        {% for ingr in ingredienti %}
            {% set qta = articoli_ingredienti.get(ingr['id_ingrediente'], 0) %}
            <div class="form-check d-flex align-items-center mb-2">
                <input class="form-check-input" type="checkbox" id="ingr{{ ingr['id_ingrediente'] }}" name="ingredienti" value="{{ ingr['id_ingrediente'] }}" {% if qta|float > 0 %}checked{% endif %}>
                <label class="form-check-label me-3" for="ingr{{ ingr['id_ingrediente'] }}">{{ ingr['nome'] }}</label>
                <input type="number" step="0.01" min="0" name="quantita_ingredienti_{{ ingr['id_ingrediente'] }}" class="form-control" style="width: 100px;" placeholder="Quantità" value="{{ qta }}">
            </div>
        {% endfor %}
    </div>

    <button class="btn btn-primary">Aggiorna</button>
</form>
{% endblock %}
