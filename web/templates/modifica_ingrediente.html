{% extends "base.html" %}
{% block content %}
<h2>Modifica Ingrediente</h2>

{% if error %}
<div class="alert alert-danger">{{ error }}</div>
{% endif %}

<form method="POST" class="mb-3">
    <div class="mb-3">
        <label for="nome" class="form-label">Nome</label>
        <input type="text" id="nome" name="nome" class="form-control" value="{{ ingrediente['nome'] }}" required>
    </div>
    <div class="mb-3">
        <label for="quantita" class="form-label">Quantità</label>
        <input type="number" id="quantita" step="0.01" min="0" name="quantita" class="form-control" value="{{ ingrediente['quantita'] }}" required>
    </div>
    <div class="mb-3">
        <label for="unita_misura" class="form-label">Unità di misura</label>
        <select id="unita_misura" name="unita_misura" class="form-select" required>
            <option value="Grammi" {% if ingrediente['unita_misura'] == 'Grammi' %}selected{% endif %}>Grammi</option>
            <option value="KG" {% if ingrediente['unita_misura'] == 'KG' %}selected{% endif %}>KG</option>
            <option value="PEZZI" {% if ingrediente['unita_misura'] == 'PEZZI' %}selected{% endif %}>PEZZI</option>
        </select>
    </div>
    <div class="mb-3">
        <label for="prezzo_unitario" class="form-label">Prezzo Unitario</label>
        <input type="number" id="prezzo_unitario" step="0.01" min="0" name="prezzo_unitario" class="form-control" value="{{ ingrediente['prezzo_unitario'] }}">
    </div>
    <div class="mb-3">
        <label for="scorta_minima" class="form-label">Scorta Minima</label>
        <input type="number" id="scorta_minima" step="0.01" min="0" name="scorta_minima" class="form-control" value="{{ ingrediente['scorta_minima'] }}">
    </div>
    <div class="mb-3">
        <label for="scorta_massima" class="form-label">Scorta Massima</label>
        <input type="number" id="scorta_massima" step="0.01" min="0" name="scorta_massima" class="form-control" value="{{ ingrediente['scorta_massima'] }}">
    </div>

    <div class="mb-3">
        <label for="categoria" class="form-label">Categoria</label>
        <select id="categoria" name="categoria" class="form-select" required>
            {% for cat in categorie %}
                <option value="{{ cat }}" {% if ingrediente['categoria'] == cat %}selected{% endif %}>{{ cat }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="mb-3">
        <label for="fornitore" class="form-label">Fornitore</label>
        <select id="fornitore" name="fornitore" class="form-select" required>
            {% for forn in fornitori %}
                <option value="{{ forn }}" {% if ingrediente['fornitore'] == forn %}selected{% endif %}>{{ forn }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="mb-3">
        <label for="descrizione" class="form-label">Descrizione (opzionale)</label>
        <textarea id="descrizione" name="descrizione" class="form-control">{{ ingrediente['descrizione'] }}</textarea>
    </div>
    <button type="submit" class="btn btn-primary">Aggiorna</button>
</form>

<form method="POST" action="{{ url_for('elimina_ingrediente', id_ingrediente=ingrediente['id_ingrediente']) }}" onsubmit="return confirm('Sei sicuro di voler eliminare questo ingrediente?');">
    <button type="submit" class="btn btn-danger">Elimina Ingrediente</button>
</form>

{% endblock %}
